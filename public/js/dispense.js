/*! For license information please see dispense.js.LICENSE.txt */
(()=>{var e={4594:()=>{window.addEventListener("DOMContentLoaded",(function(){$(document).on("click",".ConfirmDrugExistingSelectionToCache",(function(){var e=$("#PaymentSessionID").val(),t=$(".QtySelected").val(),n=$("#DispensedBy").val(),a=$(this).data("stockid");if(0!=t.length&&0!=a.length){var o={PaymentSessionID:e,StockID:a,DispensedBy:n,QtySelected:t};axios.post(GLOBAL_API_PATH+"ExistingCartItems",o).then((function(e){"QtyError"==e.data.status?(Swal.fire("Quantity Mismatch",e.data.Message,"error"),HideModal("ModalSelectDrugStockPile"),ShowModal("ModalSelectDrug")):"success"==e.data.status?(Swal.fire("Action Successful",e.data.Message,"success"),FetchExistingCartItems(),HideModal("ModalSelectDrugStockPile"),ShowModal("ModalSelectDrug")):Swal.fire("OOPS","A Minor error occurred, Try again","error")})).catch((function(e){console.log(e),CatchAxiosError(e)}))}else Swal.fire("Oops","The stock item and quantity cannot be empty","error")}))}))},1421:()=>{window.addEventListener("DOMContentLoaded",(function(){$(document).on("click",".SelectExistingDrugButton",(function(){var e=$(".ExistingDrugSelected").val(),t=$(".QtySelected").val();FetchExistingDrugStockpiles(e,t)})),$(document).on("click",".BackToDrugSelection",(function(){HideModal("ModalSelectDrugStockPile"),ShowModal("ModalSelectDrug")}))}))},846:()=>{window.addEventListener("DOMContentLoaded",(function(){$(document).on("click",".ExistingDeleteCartItem",(function(){var e=$(this).data("id");axios.get(GLOBAL_API_PATH+"RemoveDrugCartItem/"+e).then((function(e){"success"==e.data.status&&(Swal.fire("Action Successful",e.data.Message,"success"),FetchExistingCartItems())})).catch((function(e){console.log(e),CatchAxiosError(e)}))}))}))},6754:(e,t,n)=>{window.addEventListener("DOMContentLoaded",(function(){n.g.ExistingDisplayCartTable=function(e,t){if("Hospital Billable"==$("#BillingStatus").val()){var a=$("#PackageBalance").data("balance")-t;$(".ActualBalance").html("UGX ".concat(a.toLocaleString())),localStorage.setItem("DEDUCTIBLE_BALANCE",a)}var o=$(".TotalSumHere");TotalSumHere2.val(t);var r=$(".TotalSumHereInput");o.text("UGX "+t.toLocaleString()),r.length>0&&r.val(t),n.g.DisplayCartItemsHere=$(".ExistingDisplayCartItemsHere"),DisplayCartItemsHere.html("");e.forEach((function(e){DisplayCartItemsHere.append("<tr>"),DisplayCartItemsHere.append("<td>".concat(e.PatientName,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.PatientPhone,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.PatientEmail,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.DrugName,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.GenericName,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.Units,"</td>")),DisplayCartItemsHere.append("<td>UGX ".concat(e.UnitCost.toLocaleString(),"</td>")),DisplayCartItemsHere.append("<td>".concat(e.Qty.toLocaleString(),"</td>")),DisplayCartItemsHere.append("<td>UGX ".concat(e.SubTotal.toLocaleString(),"</td>")),DisplayCartItemsHere.append('<td><a data-id="'.concat(e.id,'"\n            class="btn shadow-lg btn-info btn-sm ExistingDeleteCartItem"\n            href="#Update">\n\n            <i class="fas fa-times"\n                aria-hidden="true"></i>\n        </a></td>')),DisplayCartItemsHere.append("</tr>")}))}}))},8720:(e,t,n)=>{n.g.FetchExistingCartItems=function(){spinner_display_switch.show();var e={PaymentSessionID:$("#PaymentSessionID").val()};axios.post(GLOBAL_API_PATH+"GetDispenseCart",e).then((function(e){spinner_display_switch.hide(),"success"==e.data.status&&ExistingDisplayCartTable(e.data.CartItems,e.data.Total)})).catch((function(e){spinner_display_switch.hide(),console.log(e),CatchAxiosError(e)}))},window.addEventListener("DOMContentLoaded",(function(){FetchExistingCartItems()}))},1245:(e,t,n)=>{window.addEventListener("DOMContentLoaded",(function(){n.g.HideModal=function(e){$("#"+e).hide(),$(".modal-backdrop").remove()},n.g.ShowModal=function(e){$("#"+e).show(),$("body").append('<div class="modal-backdrop show"></div>')},$(document).on("click",'[data-bs-dismiss="modal"]',(function(){$(".modal-backdrop").remove()}))}))},8532:(e,t,n)=>{n.g.FetchExistingDrugStockpiles=function(e,t){spinner_display_switch.show(),0!=e.length&&0!=t.length?axios.get(GLOBAL_API_PATH+"SelectStockPileForDispense/"+e).then((function(e){if(spinner_display_switch.hide(),"true"==e.data.Count){if("success"==e.data.status){var t=e.data.StockPiles;DisplayExistingTable(t),ShowStockPilesTable(),HideModal("ModalSelectDrug"),ShowModal("ModalSelectDrugStockPile")}}else Swal.fire("OOPS","The selected stock item is out of stock. Please restock and try again","error")})).catch((function(e){spinner_display_switch.hide(),console.log(e)})):(spinner_display_switch.hide(),Swal.fire("Oops","The stock item and quantity selection cannot be empty","error"))}},5089:(e,t,n)=>{n.g.DisplayExistingTable=function(e){DisplayStockHere.html(" ");e.forEach((function(e){DisplayStockHere.append("<tr>"),DisplayStockHere.append("<td>".concat(e.DrugName,"</td>")),DisplayStockHere.append("<td>".concat(e.GenericName,"</td>")),DisplayStockHere.append("<td>".concat(e.StockTag,"</td>")),DisplayStockHere.append("<td>".concat(e.BatchNumber,"</td>")),DisplayStockHere.append("<td>".concat(e.StockQty.toLocaleString(),"  ").concat(e.Units,"</td>")),DisplayStockHere.append("<td>".concat(e.Currency," ").concat(e.UnitSellingPrice.toLocaleString(),"</td>")),DisplayStockHere.append("<td>".concat(e.ExpiryDate,"</td>")),DisplayStockHere.append('<td><a data-stockid = "'.concat(e.StockID,'"\n        class="btn shadow-lg btn-info btn-sm ConfirmDrugExistingSelectionToCache"\n        href="#Update">\n\n        <i class="fas fa-check"\n            aria-hidden="true"></i>\n    </a></td>')),DisplayStockHere.append("</tr>")}))}},4358:(e,t,n)=>{n(3641),window.addEventListener("DOMContentLoaded",(function(){n.g.ExistingDisplayReceiptTable=function(e){var t=$(".ReceiptItemsShowHere");t.html(" ");e.forEach((function(e){t.append("<tr>"),t.append("<td>".concat(e.DrugName,"</td>")),t.append("<td>".concat(e.GenericName,"</td>")),t.append("<td>".concat(e.Units,"</td>")),t.append("<td> ".concat(e.Currency," ").concat(e.SellingPrice.toLocaleString(),"  </td>")),t.append("<td> ".concat(e.Qty.toLocaleString(),"  ").concat(e.Units,"  </td>")),t.append("<td>  ".concat(e.Currency," ").concat(e.SubTotal.toLocaleString(),"  </td>")),t.append("</tr>")}))},$("#ForPackagePatientExistingStartProcessingPayment").length>0?$(document).on("click","#ForPackagePatientExistingStartProcessingPayment",(function(){"NotSelected"!=$(".PaymentMethodSelect").val()?Swal.fire({title:"Are you sure??",text:"You want to process this payment?. This action is not reversible ",icon:"info",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Yes, Process Payment",denyButtonText:"Cancel Action"}).then((function(e){e.isConfirmed&&(spinner_display_switch.show(),ExistingProcessThePaymentNow().then(console.log("Processing Step One Complete")).then(setTimeout((function(){printJS("invoice-POS","html"),spinner_display_switch.hide()}),2e3)))})):Swal.fire("OOPS, A Minor error occurred"," The payment method cannot be empty. Please select a payment method to proceed","error")})):$("#ExistingStartProcessingPayment").length>0&&$(document).on("click","#ExistingStartProcessingPayment",(function(){var e=$("#PatientBillable").val(),t=$("#Outstanding").val();if(0==e||0==t||null==e||NaN==e||null==t||NaN==t)return Swal.fire("OOPS, A minor error ocurred","The payment method or Amount Paid  cannot be empty. Select a payment method and try again","error"),!1;"NotSelected"!=$(".PaymentMethodSelect").val()?Swal.fire({title:"Are you sure??",text:"You want to process this payment?. This action is not reversible ",icon:"info",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Yes, Process Payment",denyButtonText:"Cancel Action"}).then((function(e){e.isConfirmed&&(spinner_display_switch.show(),ExistingProcessThePaymentNow().then(console.log("Processing Step One Complete")).then(setTimeout((function(){printJS("invoice-POS","html"),spinner_display_switch.hide()}),2e3)))})):Swal.fire("OOPS, A Minor error occurred"," The payment method cannot be empty. Please select a payment method to proceed","error")}))}))},3641:(e,t,n)=>{window.addEventListener("DOMContentLoaded",(function(){$("#PatientBillable").on("keyup change",(function(e){var t=Number($("#PatientBillable").val()),n=Number($(".TotalSumHereInput").val())-t;$("#Outstanding").val(n),0!=t&&null!=t&&NaN!=t||$("#Outstanding").val(0)})),$("#ForPackagePatientExistingStartProcessingPayment").length>0?n.g.ExistingProcessThePaymentNow=function(){return new Promise((function(e,t){spinner_display_switch.show();var a=$("#PatientName").val(),o=$("#PatientPhone").val(),r=$("#PatientEmail").val(),i=$("#DispensedBy").val();$(".PatientNameT").html(a),$(".PatientPhoneT").html(o),$(".PatientEmailT").html(r),$(".DispensedByT").html(i);var s=$("#PaymentSessionID").val(),l=$(".PaymentMethodSelect").val();if(n.g.PaymentModalWindow=new bootstrap.Modal(document.getElementById("PaymentModalWindow"),{keyboard:!1}),0==l.length)Swal.fire("OOPS, A minor error ocurred","The payment method cannot be empty. Select a payment method and try again","error");else{var c={PaymentMethod:l,PaymentSessionID:s,DEDUCTIBLE_BALANCE:localStorage.getItem("DEDUCTIBLE_BALANCE"),RecordKey:$("#RecordKey").val()};console.log("The deductible balance is ".concat(localStorage.getItem("DEDUCTIBLE_BALANCE"))),axios.post(GLOBAL_API_PATH+"PackagePatientExistingProcessPayment",c).then((function(e){if("out_of_stock"==e.data.status)Swal.fire("OOPS, Item(s)  out of stock",e.data.Message,"error");else if("issued"==e.data.status)Swal.fire("Error","Transaction Completed, Please refresh the page");else{var t=e.data.receipt;DocumentTypeShowHere.html(e.data.DocumentType),TotalAmountShowHere.html("UGX ".concat(e.data.TotalSum.toLocaleString())),ExistingDisplayReceiptTable(t),PatientSelectShow.show(),SelectPaymentMethodShow.hide()}console.log(e.data.receipt)})).catch((function(e){CatchAxiosError(e),spinner_display_switch.hide()}))}}))}:$("#ExistingStartProcessingPayment").length>0&&(n.g.ExistingProcessThePaymentNow=function(){return new Promise((function(e,t){spinner_display_switch.show();var a=$("#PatientName").val(),o=$("#PatientPhone").val(),r=$("#PatientEmail").val(),i=$("#DispensedBy").val(),s=$("#PatientBillable").val(),l=$("#Outstanding").val();$(".PatientNameT").html(a),$(".PatientPhoneT").html(o),$(".PatientEmailT").html(r),$(".DispensedByT").html(i);var c=$("#PaymentSessionID").val(),d=$(".PaymentMethodSelect").val();if(n.g.PaymentModalWindow=new bootstrap.Modal(document.getElementById("PaymentModalWindow"),{keyboard:!1}),0==d.length||0==s||0==l)return Swal.fire("OOPS, A minor error ocurred","The payment method or Amount Paid  cannot be empty. Select a payment method and try again","error"),!1;if(0==d.length||0==s.length||0==l.length)return Swal.fire("OOPS, A minor error ocurred","The payment method or Amount Paid  cannot be empty. Select a payment method and try again","error"),!1;var p={PaymentMethod:d,PaymentSessionID:c,DEDUCTIBLE_BALANCE:localStorage.getItem("DEDUCTIBLE_BALANCE"),RecordKey:$("#RecordKey").val(),Balance:s,Outstanding:l,PatientEmail:r,PatientName:a,PatientPhone:o};console.log("The deductible balance is ".concat(localStorage.getItem("DEDUCTIBLE_BALANCE"))),axios.post(GLOBAL_API_PATH+"ExistingProcessPayment",p).then((function(e){if("out_of_stock"==e.data.status)Swal.fire("OOPS, Item(s)  out of stock",e.data.Message,"error");else if("issued"==e.data.status)Swal.fire("Error","Transaction Completed, Please refresh the page");else{var t=e.data.receipt;DocumentTypeShowHere.html(e.data.DocumentType),TotalAmountShowHere.html("UGX ".concat(e.data.TotalSum.toLocaleString())),ExistingDisplayReceiptTable(t),PatientSelectShow.show(),SelectPaymentMethodShow.hide()}console.log(e.data.receipt)})).catch((function(e){CatchAxiosError(e),spinner_display_switch.hide()}))}))})}))},9908:()=>{$(".ReloadTimer").length>0&&(window.performance&&console.info("window.performance works fine on this browser"),console.info(performance.navigation.type),performance.navigation.type==performance.navigation.TYPE_RELOAD&&(console.info("This page is reloaded"),window.location.replace(GLOBAL_PATH+"SelectExistingPatient")))},7762:(e,t,n)=>{n.g.CatchAxiosError=function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message)}},2444:()=>{window.addEventListener("DOMContentLoaded",(function(){$(document).on("click",".ConfirmDrugSelectionToCache",(function(){var e=$("#PatientName").val(),t=$("#PatientPhone").val(),n=$("#PatientEmail").val(),a=$("#PaymentSessionID").val(),o=$("#QtySelected").val(),r=$("#DispensedBy").val(),i=$(this).data("stockid");if(0!=e.length&&0!=t.length&&0!=n.length&&0!=a.length){var s={PatientName:e,PatientPhone:t,PatientEmail:n,PaymentSessionID:a,StockID:i,DispensedBy:r,QtySelected:o};axios.post(GLOBAL_API_PATH+"RecordDispenseCache",s).then((function(e){"QtyError"==e.data.status?(Swal.fire("Quantity Mismatch",e.data.Message,"error"),ShowSelectDrugsSelect()):"success"==e.data.status?(Swal.fire("Action Successful",e.data.Message,"success"),FetchCartItems(),ShowSelectDrugsSelect()):Swal.fire("OOPS","A Minor error occurred, Try again","error")})).catch((function(e){console.log(e),CatchAxiosError(e)}))}else Swal.fire("Oops","Please fill in all the patient details first","error")}))}))},69:()=>{window.addEventListener("DOMContentLoaded",(function(){$(document).on("click",".DeleteCartItem",(function(){var e=$(this).data("id");axios.get(GLOBAL_API_PATH+"RemoveDrugCartItem/"+e).then((function(e){"success"==e.data.status&&(Swal.fire("Action Successful",e.data.Message,"success"),FetchCartItems())})).catch((function(e){console.log(e),CatchAxiosError(e)}))}))}))},8330:(e,t,n)=>{n.g.DisplayCartTable=function(e,t){var a=$(".TotalSumHere"),o=$(".TotalSumHereInput");a.text("UGX "+t.toLocaleString()),o.length>0&&o.val(t),n.g.DisplayCartItemsHere=$(".DisplayCartItemsHere"),DisplayCartItemsHere.html("");e.forEach((function(e){DisplayCartItemsHere.append("<tr>"),DisplayCartItemsHere.append("<td>".concat(e.PatientName,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.PatientPhone,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.PatientEmail,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.DrugName,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.GenericName,"</td>")),DisplayCartItemsHere.append("<td>".concat(e.Units,"</td>")),DisplayCartItemsHere.append("<td>UGX ".concat(e.UnitCost.toLocaleString(),"</td>")),DisplayCartItemsHere.append("<td>".concat(e.Qty.toLocaleString(),"</td>")),DisplayCartItemsHere.append("<td>UGX ".concat(e.SubTotal.toLocaleString(),"</td>")),DisplayCartItemsHere.append('<td><a data-id="'.concat(e.id,'"\n            class="btn shadow-lg btn-info btn-sm DeleteCartItem"\n            href="#Update">\n\n            <i class="fas fa-times"\n                aria-hidden="true"></i>\n        </a></td>')),DisplayCartItemsHere.append("</tr>")}))}},4720:(e,t,n)=>{n.g.FetchCartItems=function(){var e={PaymentSessionID:$("#PaymentSessionID").val()};axios.post(GLOBAL_API_PATH+"GetDispenseCart",e).then((function(e){"success"==e.data.status&&DisplayCartTable(e.data.CartItems,e.data.Total)})).catch((function(e){console.log(e),CatchAxiosError(e)}))}},2318:(e,t,n)=>{n.g.FetchDrugStockpiles=function(){var e=$(".SelectedDrugId").val(),t=$("#QtySelected").val();0!=e.length&&0!=t.length?axios.get(GLOBAL_API_PATH+"SelectStockPileForDispense/"+e).then((function(e){if("true"==e.data.Count){if("success"==e.data.status){var t=e.data.StockPiles;DisplayTable(t),ShowStockPilesTable()}}else Swal.fire("OOPS","The selected item is out of stock. Please restock and try again","error")})).catch((function(e){console.log(e)})):Swal.fire("Oops","The drug and quantity selection cannot be empty","error")}},8947:(e,t,n)=>{n(3594),window.addEventListener("DOMContentLoaded",(function(){n.g.DisplayReceiptTable=function(e){var t=$(".ReceiptItemsShowHere");t.html(" ");e.forEach((function(e){t.append("<tr>"),t.append("<td>".concat(e.DrugName,"</td>")),t.append("<td>".concat(e.GenericName,"</td>")),t.append("<td>".concat(e.Units,"</td>")),t.append("<td> ".concat(e.Currency," ").concat(e.SellingPrice.toLocaleString(),"  </td>")),t.append("<td> ".concat(e.Qty.toLocaleString(),"  ").concat(e.Units,"  </td>")),t.append("<td>  ".concat(e.Currency," ").concat(e.SubTotal.toLocaleString(),"  </td>")),t.append("</tr>")}))},$(document).on("click","#StartProcessingPayment",(function(){Swal.fire({title:"Are you sure??",text:"You want to process this payment?. This action is not reversible ",icon:"info",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Yes, Process Payment",denyButtonText:"Cancel Action"}).then((function(e){e.isConfirmed&&(spinner_display_switch.show(),ProcessThePaymentNow().then(console.log("Processing Step One Complete")).then(GeneratePaymentSession(),DisplayCartItemsHere.html(" "),TotalSumHere.html(" ")))}))}))}))},3594:(e,t,n)=>{function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.addEventListener("DOMContentLoaded",(function(){$("#PatientBillable").on("keyup change",(function(e){var t=Number($("#PatientBillable").val()),n=Number($(".TotalSumHereInput").val())-t;$("#Outstanding").val(n),0!=t&&null!=t&&NaN!=t||$("#Outstanding").val(0)})),n.g.ProcessThePaymentNow=function(){return new Promise((function(e,t){spinner_display_switch.show();var o=$("#PatientName").val(),r=$("#PatientPhone").val(),i=$("#PatientEmail").val(),s=$("#DispensedBy").val(),l=$("#PatientBillable").val(),c=$("#Outstanding").val();$(".PatientNameT").html(o),$(".PatientPhoneT").html(r),$(".PatientEmailT").html(i),$(".DispensedByT").html(s);var d=$("#PaymentSessionID").val(),p=$(".PaymentMethodSelect").val();if(n.g.PaymentModalWindow=new bootstrap.Modal(document.getElementById("PaymentModalWindow"),{keyboard:!1}),0==p.length||0==l.length||0==c.length)return Swal.fire("OOPS, A minor error ocurred","The payment method or Amount Paid  cannot be empty. Select a payment method and try again","error"),!1;if(0==o.length||0==r.length||0==i.length)return Swal.fire("OOPS, A minor error ocurred","This payment has been processed already. Please  register a new patient to dispense Stock items to","error"),!1;if(0!=p.length&&0!=l.length&&0!=c.length){var u,m=(a(u={PaymentMethod:p,PaymentSessionID:d,Balance:l,Outstanding:c,PatientEmail:i},"PatientEmail",i),a(u,"PatientName",o),a(u,"PatientPhone",r),u);axios.post(GLOBAL_API_PATH+"ProcessDispense",m).then((function(e){if("out_of_stock"==e.data.status)Swal.fire("OOPS, Item(s)  out of stock",e.data.Message,"error");else if("Item_Already_purchased"==e.data.status){var t=e.data.receipt;DocumentTypeShowHere.html(e.data.DocumentType),TotalAmountShowHere.html("UGX ".concat(e.data.TotalSum.toLocaleString())),DisplayReceiptTable(t),$("#PatientBillable").val(0),$("#Outstanding").val(0),stepper.goTo(1),setTimeout((function(){printJS("invoice-POS","html"),spinner_display_switch.hide()}),2e3)}else{t=e.data.receipt;DocumentTypeShowHere.html(e.data.DocumentType),TotalAmountShowHere.html("UGX ".concat(e.data.TotalSum.toLocaleString())),$("#PatientBillable").val(0),$("#Outstanding").val(0),DisplayReceiptTable(t),stepper.goTo(1),setTimeout((function(){printJS("invoice-POS","html"),spinner_display_switch.hide()}),2e3)}console.log(e.data.receipt)})).catch((function(e){CatchAxiosError(e),spinner_display_switch.hide()}))}}))}}))},2375:(e,t,n)=>{n.g.ShowSelectDrugsSelect=function(){SelectDrugSelect.show(),StockPilesTable.hide(),DisplayStockHere.html("")}},229:(e,t,n)=>{n.g.ShowStockPilesTable=function(){SelectDrugSelect.hide(),StockPilesTable.show()}},519:(e,t,n)=>{n.g.DisplayTable=function(e){DisplayStockHere.html(" ");e.forEach((function(e){DisplayStockHere.append("<tr>"),DisplayStockHere.append("<td>".concat(e.DrugName,"</td>")),DisplayStockHere.append("<td>".concat(e.GenericName,"</td>")),DisplayStockHere.append("<td>".concat(e.StockTag,"</td>")),DisplayStockHere.append("<td>".concat(e.BatchNumber,"</td>")),DisplayStockHere.append("<td>".concat(e.StockQty.toLocaleString(),"  ").concat(e.Units,"</td>")),DisplayStockHere.append("<td>".concat(e.Currency," ").concat(e.UnitSellingPrice.toLocaleString(),"</td>")),DisplayStockHere.append("<td>".concat(e.ExpiryDate,"</td>")),DisplayStockHere.append('<td><a data-stockid = "'.concat(e.StockID,'"\n        class="btn shadow-lg btn-info btn-sm ConfirmDrugSelectionToCache"\n        href="#Update">\n\n        <i class="fas fa-check"\n            aria-hidden="true"></i>\n    </a></td>')),DisplayStockHere.append("</tr>")}))}},5676:()=>{window.addEventListener("DOMContentLoaded",(function(){StockPilesTable.hide(),$(document).on("click",".GoToSelectDrug",(function(){ShowSelectDrugsSelect()})),$(document).on("click",".SelectStockPile",(function(){FetchDrugStockpiles()}))}))},5934:(e,t,n)=>{n.g.Virtualhost="http://d.pharma/api/";var a=$("#GetVirtualHost").val();n.g.GLOBAL_PATH=a+"/",n.g.DOMAIN_NAME=location.host,n.g.PROTOCOL=location.protocol,n.g.GLOBAL_API_PATH=PROTOCOL+"//"+DOMAIN_NAME+"/api/",n.g.TotalSumHere2=$(".TotalSumHere2"),n.g.GoToPay=$(".GoToPay"),n(9908),window.addEventListener("DOMContentLoaded",(function(){$(".TotalSumHere2").length>0&&setInterval((function(){"0"==$(".TotalSumHere2").val()||0==$(".TotalSumHere2").val()?GoToPay.hide():GoToPay.show()}),1e3)})),n.g.SelectDrugSelect=$(".SelectDrugSelect"),n.g.StockPilesTable=$(".SelectStockPileTable"),n.g.DisplayStockHere=$(".DisplayStockHere"),n.g.spinner_display_switch=$(".spinner_display_switch"),n.g.DocumentTypeShowHere=$(".DocumentTypeShowHere"),n.g.TotalAmountShowHere=$(".TotalAmountShowHere"),n.g.TotalSumHere=$(".TotalSumHere"),n.g.GeneratePaymentSession=function(){axios.get("api/GeneratePaymentSession").then((function(e){"success"==e.data.status?($("#PaymentSessionID").val(e.data.PaymentSessionID),$("#PatientName").val(""),$("#PatientPhone").val(""),$("#PatientEmail").val(""),console.log("Sessions Ejected and Regenerated")):Swal.fire("OOPS","A network error ocurred, Check your connection","error")})).catch((function(e){CatchAxiosError(e)}))},window.addEventListener("DOMContentLoaded",(function(){$(".SelectPaymentMethodShow").length>0&&$(".PatientSelectShow").length>0&&(n.g.SelectPaymentMethodShow=$(".SelectPaymentMethodShow"),n.g.PatientSelectShow=$(".PatientSelectShow"),PatientSelectShow.hide())}))},8607:e=>{var t;window,t=function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./src/index.js":function(e,t,n){"use strict";n.r(t),n("./src/sass/index.scss");var a=n("./src/js/init.js").default.init;"undefined"!=typeof window&&(window.printJS=a),t.default=a},"./src/js/browser.js":function(e,t,n){"use strict";n.r(t);var a={isFirefox:function(){return"undefined"!=typeof InstallTrigger},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!a.isIE()&&!!window.StyleMedia},isChrome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!!e.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}};t.default=a},"./src/js/functions.js":function(e,t,n){"use strict";n.r(t),n.d(t,"addWrapper",(function(){return i})),n.d(t,"capitalizePrint",(function(){return s})),n.d(t,"collectStyles",(function(){return l})),n.d(t,"addHeader",(function(){return d})),n.d(t,"cleanUp",(function(){return p})),n.d(t,"isRawHTML",(function(){return u}));var a=n("./src/js/modal.js"),o=n("./src/js/browser.js");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return'<div style="font-family:'+t.font+" !important; font-size: "+t.font_size+' !important; width:100%;">'+e+"</div>"}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e,t){for(var n="",a=(document.defaultView||window).getComputedStyle(e,""),o=0;o<a.length;o++)(-1!==t.targetStyles.indexOf("*")||-1!==t.targetStyle.indexOf(a[o])||c(t.targetStyles,a[o]))&&a.getPropertyValue(a[o])&&(n+=a[o]+":"+a.getPropertyValue(a[o])+";");return n+="max-width: "+t.maxWidth+"px !important; font-size: "+t.font_size+" !important;"}function c(e,t){for(var n=0;n<e.length;n++)if("object"===r(t)&&-1!==t.indexOf(e[n]))return!0;return!1}function d(e,t){var n=document.createElement("div");if(u(t.header))n.innerHTML=t.header;else{var a=document.createElement("h1"),o=document.createTextNode(t.header);a.appendChild(o),a.setAttribute("style",t.headerStyle),n.appendChild(a)}e.insertBefore(n,e.childNodes[0])}function p(e){e.showModal&&a.default.close(),e.onLoadingEnd&&e.onLoadingEnd(),(e.showModal||e.onLoadingStart)&&window.URL.revokeObjectURL(e.printable);var t="mouseover";(o.default.isChrome()||o.default.isFirefox())&&(t="focus"),window.addEventListener(t,(function n(){window.removeEventListener(t,n),e.onPrintDialogClose();var a=document.getElementById(e.frameId);a&&a.remove()}))}function u(e){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(e)}},"./src/js/html.js":function(e,t,n){"use strict";n.r(t);var a=n("./src/js/functions.js"),o=n("./src/js/print.js");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=e.cloneNode(),o=Array.prototype.slice.call(e.childNodes),r=0;r<o.length;r++)if(-1===t.ignoreElements.indexOf(o[r].id)){var s=i(o[r],t);n.appendChild(s)}switch(t.scanStyles&&1===e.nodeType&&n.setAttribute("style",Object(a.collectStyles)(e,t)),e.tagName){case"SELECT":n.value=e.value;break;case"CANVAS":n.getContext("2d").drawImage(e,0,0)}return n}t.default={print:function(e,t){var n,s="object"===r(n=e.printable)&&n&&(n instanceof HTMLElement||1===n.nodeType)?e.printable:document.getElementById(e.printable);s?(e.printableElement=i(s,e),e.header&&Object(a.addHeader)(e.printableElement,e),o.default.send(e,t)):window.console.error("Invalid HTML element id: "+e.printable)}}},"./src/js/image.js":function(e,t,n){"use strict";n.r(t);var a=n("./src/js/functions.js"),o=n("./src/js/print.js"),r=n("./src/js/browser.js");t.default={print:function(e,t){e.printable.constructor!==Array&&(e.printable=[e.printable]),e.printableElement=document.createElement("div"),e.printable.forEach((function(t){var n=document.createElement("img");if(n.setAttribute("style",e.imageStyle),n.src=t,r.default.isFirefox()){var a=n.src;n.src=a}var o=document.createElement("div");o.appendChild(n),e.printableElement.appendChild(o)})),e.header&&Object(a.addHeader)(e.printableElement,e),o.default.send(e,t)}}},"./src/js/init.js":function(e,t,n){"use strict";n.r(t);var a=n("./src/js/browser.js"),o=n("./src/js/modal.js"),r=n("./src/js/pdf.js"),i=n("./src/js/html.js"),s=n("./src/js/raw-html.js"),l=n("./src/js/image.js"),c=n("./src/js/json.js");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["pdf","html","image","json","raw-html"];t.default={init:function(){var e={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(e){throw e},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},t=arguments[0];if(void 0===t)throw new Error("printJS expects at least 1 attribute.");switch(d(t)){case"string":e.printable=encodeURI(t),e.fallbackPrintable=e.printable,e.type=arguments[1]||e.type;break;case"object":for(var n in e.printable=t.printable,e.fallbackPrintable=void 0!==t.fallbackPrintable?t.fallbackPrintable:e.printable,e.fallbackPrintable=e.base64?"data:application/pdf;base64,".concat(e.fallbackPrintable):e.fallbackPrintable,e)"printable"!==n&&"fallbackPrintable"!==n&&(e[n]=void 0!==t[n]?t[n]:e[n]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+d(t))}if(!e.printable)throw new Error("Missing printable information.");if(!e.type||"string"!=typeof e.type||-1===p.indexOf(e.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");e.showModal&&o.default.show(e),e.onLoadingStart&&e.onLoadingStart();var u=document.getElementById(e.frameId);u&&u.parentNode.removeChild(u);var m=document.createElement("iframe");switch(a.default.isFirefox()?m.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):m.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),m.setAttribute("id",e.frameId),"pdf"!==e.type&&(m.srcdoc="<html><head><title>"+e.documentTitle+"</title>",e.css&&(Array.isArray(e.css)||(e.css=[e.css]),e.css.forEach((function(e){m.srcdoc+='<link rel="stylesheet" href="'+e+'">'}))),m.srcdoc+="</head><body></body></html>"),e.type){case"pdf":if(a.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var f=window.open(e.fallbackPrintable,"_blank");f.focus(),e.onIncompatibleBrowser()}catch(t){e.onError(t)}finally{e.showModal&&o.default.close(),e.onLoadingEnd&&e.onLoadingEnd()}else r.default.print(e,m);break;case"image":l.default.print(e,m);break;case"html":i.default.print(e,m);break;case"raw-html":s.default.print(e,m);break;case"json":c.default.print(e,m)}}}},"./src/js/json.js":function(e,t,n){"use strict";n.r(t);var a=n("./src/js/functions.js"),o=n("./src/js/print.js");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.default={print:function(e,t){if("object"!==r(e.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof e.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!e.properties||!Array.isArray(e.properties))throw new Error("Invalid properties array for your JSON data.");e.properties=e.properties.map((function(t){return{field:"object"===r(t)?t.field:t,displayName:"object"===r(t)?t.displayName:t,columnSize:"object"===r(t)&&t.columnSize?t.columnSize+";":100/e.properties.length+"%;"}})),e.printableElement=document.createElement("div"),e.header&&Object(a.addHeader)(e.printableElement,e),e.printableElement.innerHTML+=function(e){var t=e.printable,n=e.properties,o='<table style="border-collapse: collapse; width: 100%;">';e.repeatTableHeader&&(o+="<thead>"),o+="<tr>";for(var r=0;r<n.length;r++)o+='<th style="width:'+n[r].columnSize+";"+e.gridHeaderStyle+'">'+Object(a.capitalizePrint)(n[r].displayName)+"</th>";o+="</tr>",e.repeatTableHeader&&(o+="</thead>"),o+="<tbody>";for(var i=0;i<t.length;i++){o+="<tr>";for(var s=0;s<n.length;s++){var l=t[i],c=n[s].field.split(".");if(c.length>1)for(var d=0;d<c.length;d++)l=l[c[d]];else l=l[n[s].field];o+='<td style="width:'+n[s].columnSize+e.gridStyle+'">'+l+"</td>"}o+="</tr>"}return o+="</tbody></table>"}(e),o.default.send(e,t)}}},"./src/js/modal.js":function(e,t,n){"use strict";n.r(t);var a={show:function(e){var t=document.createElement("div");t.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),t.setAttribute("id","printJS-Modal");var n=document.createElement("div");n.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var o=document.createElement("div");o.setAttribute("class","printClose"),o.setAttribute("id","printClose"),n.appendChild(o);var r=document.createElement("span");r.setAttribute("class","printSpinner"),n.appendChild(r);var i=document.createTextNode(e.modalMessage);n.appendChild(i),t.appendChild(n),document.getElementsByTagName("body")[0].appendChild(t),document.getElementById("printClose").addEventListener("click",(function(){a.close()}))},close:function(){var e=document.getElementById("printJS-Modal");e&&e.parentNode.removeChild(e)}};t.default=a},"./src/js/pdf.js":function(e,t,n){"use strict";n.r(t);var a=n("./src/js/print.js"),o=n("./src/js/functions.js");function r(e,t,n){var o=new window.Blob([n],{type:"application/pdf"});o=window.URL.createObjectURL(o),t.setAttribute("src",o),a.default.send(e,t)}t.default={print:function(e,t){if(e.base64){var n=Uint8Array.from(atob(e.printable),(function(e){return e.charCodeAt(0)}));r(e,t,n)}else{e.printable=/^(blob|http|\/\/)/i.test(e.printable)?e.printable:window.location.origin+("/"!==e.printable.charAt(0)?"/"+e.printable:e.printable);var a=new window.XMLHttpRequest;a.responseType="arraybuffer",a.addEventListener("error",(function(){Object(o.cleanUp)(e),e.onError(a.statusText,a)})),a.addEventListener("load",(function(){if(-1===[200,201].indexOf(a.status))return Object(o.cleanUp)(e),void e.onError(a.statusText,a);r(e,t,a.response)})),a.open("GET",e.printable,!0),a.send()}}}},"./src/js/print.js":function(e,t,n){"use strict";n.r(t);var a=n("./src/js/browser.js"),o=n("./src/js/functions.js"),r={send:function(e,t){document.getElementsByTagName("body")[0].appendChild(t);var n=document.getElementById(e.frameId);n.onload=function(){if("pdf"!==e.type){var t=n.contentWindow||n.contentDocument;if(t.document&&(t=t.document),t.body.appendChild(e.printableElement),"pdf"!==e.type&&e.style){var o=document.createElement("style");o.innerHTML=e.style,t.head.appendChild(o)}var r=t.getElementsByTagName("img");r.length>0?function(e){var t=e.map((function(e){if(e.src&&e.src!==window.location.href)return function(e){return new Promise((function(t){!function n(){e&&void 0!==e.naturalWidth&&0!==e.naturalWidth&&e.complete?t():setTimeout(n,500)}()}))}(e)}));return Promise.all(t)}(Array.from(r)).then((function(){return i(n,e)})):i(n,e)}else a.default.isFirefox()?setTimeout((function(){return i(n,e)}),1e3):i(n,e)}}};function i(e,t){try{if(e.focus(),a.default.isEdge()||a.default.isIE())try{e.contentWindow.document.execCommand("print",!1,null)}catch(t){e.contentWindow.print()}else e.contentWindow.print()}catch(e){t.onError(e)}finally{a.default.isFirefox()&&(e.style.visibility="hidden",e.style.left="-1px"),Object(o.cleanUp)(t)}}t.default=r},"./src/js/raw-html.js":function(e,t,n){"use strict";n.r(t);var a=n("./src/js/print.js");t.default={print:function(e,t){e.printableElement=document.createElement("div"),e.printableElement.setAttribute("style","width:100%"),e.printableElement.innerHTML=e.printable,a.default.send(e,t)}}},"./src/sass/index.scss":function(e,t,n){},0:function(e,t,n){e.exports=n("./src/index.js")}}).default},e.exports=t()}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(8607);n(5934),n(229),n(2375),n(519),n(2318),n(7762),n(2444),n(8330),n(4720),n(69),n(5676),n(8947),n(1245),n(8532),n(5089),n(1421),n(4594),n(8720),n(6754),n(846),n(4358)})()})();